#!/usr/bin/env bash

if [ "$1" == "--compile" ]
then
    compile=true
    shift
else
    compile=false
fi

if [ "$1" == "" ]
then
    shaders="creation define lk wavy wetrock flirt"
else
    shaders="$1"
fi

echo 
for i in $shaders
do
    echo "============================================== $i"
    if [ $compile = true ]; then
        ./shade -c -s -O shaders/$i.frag > x.s
        if [ -f x.o ]; then rm x.o; fi
        ./as x.s
        if [ -f x.o ]; then ./gpuemu --term x.o; fi
    else
        ./shade --term -f 90 90 shaders/$i.frag
        mv image0090.ppm $i.ppm
    fi
done

